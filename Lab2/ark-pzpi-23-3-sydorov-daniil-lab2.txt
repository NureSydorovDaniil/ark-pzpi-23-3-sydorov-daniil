МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
 

ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
 



Кафедра «Програмна інженерія»
 
 


ЗВІТ
з лабораторної роботи №2
з дисципліни «Аналіз та рефакторинг коду»
 


 





Виконав:                                                           	                 Прийняв:
ст. гр. ПЗПІ-23-3                                    	       	     	       ст. викладач кафедри ПІ
Сидоров Д.О.                                                                            Сокорчук І.П. 







Харків 2025

Історія змін

№	Дата	Версія звіту	Опис змін та виправлень
1	1.12.2025	0.1	Початок роботи над презентацією та доповіддю
2	2.12.2025	0.2	Редагування минулої версії

ЛАБОРАТОРНА РОБОТА №2. РОЗРОБКА БАЗИ ДАНИХ ДЛЯ СЕРВЕРНОЇ ЧАСТИНИ ПРОГРАМНОЇ СИСТЕМИ ТА ПРИКЛАДНОГО ПРОГРАМНОГО ІНТЕРФЕЙСУ (API).

Хід роботи:
1.	Розробити будову програмної системи
2.	Створити UML діаграму прецедентів для серверної частини системи.
3.	Створити ER діаграму даних.
4.	Розробити базу даних (БД) програмної системи..
5.	Створити діаграму структури БД..
6.	Розробити функції роботи з БД (ORM або CoRM тощо)..
7.	Розробити API (REST або GraphQL, gRPC тощо) для взаємодії серверної частини з клієнтами.
8.	Створити специфікацію розробленого API.
9.	Створити програмну реалізацію розробленого API та функцій роботи з БД.
10.	Перевірити роботу створеного програмного коду серверної частини системи.

Завдання 1
	 Основним призначенням для програмної системи для доставки пива є автоматизація процесу замовлення, обробки та доставки пивної продукції користувачу. Програмна система забезпечує зручний доступ до інформації про наявні товари, замовлення та їх статус.
	Програмна система доставки пива має багату структуру, яка складається з декількох основних компонентів. Кожен з компонентів виконує свою функцію, до основних належать клієнтська частина, серверна частина та база даних. Взаємодія між ними забезпечує коректну роботу всієї системи.
	Клієнтська частина програмної системи призначена для взаємодії користувача з сервісом доставки пива. Вона може бути реалізована у вигляді веб-застосунку та мобільного застосунку. За допомогою клієнтської частини користувач має можливість переглядати асортимент доступного пива, отримувати інформацію про ціну та має можливість обрати необхідну кількість товару та оформити замовлення. 
	Серверна частина програмної системи виконує роль центрального елементу, який відповідає за обробку всіх запитів, що надходять від клієнтської частини. Сервер приймає запити користувачів, аналізує їх, виконує логіку та формує відповідь. Також серверна частина відповідає за перевірку коректності введених даних. Для обміну даними між клієнтською частиною та серверною використовується прикладний програмний інтерфейс (АРІ), який реалізується за допомогою HTTP-запитів.
	База даних є важливим елементом програмної системи доставки пива та використовується для зберігання всієї необхідної інформації. У базі даних зберігаються відомості про користувачів, про перелік продукції та інформація про замовлення, та інформація про доставку.
	Взаємодія між основними елементами програмної системи відбувається так: Користувач за допомогою клієнтської частини надсилає запит до серверної частини для перегляду асортименту або оформлення замовлення, серверна частина отримує запит, обробляє його та звертається до бази даних для отримання або збереження інформації. Після виконання усії операцій, сервер формує відповідь та надсилає її назад клієнтській частині, де вона відображається користуачу.

Завдання 2
	Для сервернї частини програмної системи доставка пива була розроблена UML діаграма, яка відображає основні функціональні можливості системи та взаємодію користувачів із сервером. Діаграма дозволяє побачити ролі користувачів, та перелік дій, які вони можуть виконувати через прикладний програмний інтерфейс. У системі виділено 2 основні актори: клієнт та адміністратор. 
	Клієнт має можливість реєструватися в системі, переглядати асортимент, пива, створювати замовлення та отримувати інформацію про статус доставки. 
	Адміністратор відповідає за керування даними системи, зокрема за додавання та редагування інформації, а також за перегляд та зміну статусу замовлення. 
	Таким чином UML діаграма дозволяє визначити функціональні межі серверної частини програмної системи доставки пива та є основою для подальшого проєктування бази даних та API. UML діаграма зорбражена на рисунку 1 та 2.

 
Рисунок 1 – UML діаграма для клієнта

 
Рисунок 2 - UML діаграма для адміністратора


Завдання 3
	Для серверної частини системи доставки пива була розроблена ER діаграма, яка відображає основні таблиці та їх взаємозв’язки. Основними таблицями є таблиця користувачів (Users), пиво (Beers), замолвення(Orders), та позицій замовлення (Orderitems). Користувач може мати багато замовлень, кожне замовлення може містити кілька позицій пива, а кожна позиція замовлення пов’язана з певним видом пива.
	Така структура дозволяє ефективно зберігати дані про користувачів, асортимент та про історію замовлень, забезпечує цілісність даних та дозволяє зруччно реалізувати серверну логіку і API для роботи з клієнтською частиною системи.
	Таблиця користувачів:
•	User_id – id користувача
•	Name – ім’я користувача
•	Phone – телефон користувача
•	Email – пошта користувача
•	Password – пароль користувача

Таблиця Пива:
•	Beer_id – Id пива
•	Name – назва пива
•	Type – тип пива
•	Price - ціна пива

Таблиця Замовлень:
•	Order_id – id замовлення
•	User_id – id користувача
•	Total – зашальна сума замовлення
•	Status – статус замовлення
•	Order_date – дата замовлення
•	delivery_address – адреса замовлення

Таблиця товарів у замовленні:
•	Order_item_id – id рядка
•	Order_id – id замовлення
•	Beer_id – id пива
•	Quantiti – загальна кількість

ER діаграма зображена на рисунку 3.
 
Рисунок 3 – ER діаграма

Завдання 4
	Для серверної частини програмної системи доставки пива була розроблена база даних, яка включає в себе таблиці users, orders, beers, orderitems.
	Таблиця Users містить інформацію про користувача, включаючи ім’я, номер телефону, електрону пошту та пароль. Таблиця Beers зберігає всі види пива та їх ціну. Таблиця Orders зберігає замовлення користувачів, включаючи загальну суму, статус замовлення, дату створення, та адресу доставки. Таблиця OrderItems дозволяє одному замовленю містити декілька видів пива та вказувати їх кількість.
	Зв’язки між таблицями реалізовані за допомогою первинних та зовнішніх ключів. Користувач може мати багато замовлень, одне замовлення може містити багато товарів, а одне пиво може входити до багатьох замовлень.

 
Рисунок 4 – структура БД










Завдання 5

 
Рисунок 5 - діаграма структури БД


Завдання 6
	Для перевірки функцій роботи з ДБ були розроблено функції на Python з використанням ORM SQLAlchemy. Реалізовано моделі користувачів, пива, замовлення та позицій замовлень. Функції додавання користувачів та товарів, створення замовлення та отримання данних з БД.

 
Рисунок 6 – підключення к sql Server через SQLAlchemy

 
Рисунок 7 – моделі таблиць users, orders, orderitems, beers
 
Рисунок 8 – функції для створення та читання данних 

 
Рисунок 9 – перевірка роботи функцій й тестові визови

	Після запуску головного файлу, можемо побачити що у базі даних було задано значення для таблиці Users та Beers. Результат зображено на рисунку 10 та 11.
 
Рисунок 10 – таблиця Users
 
Рисунок 11 – таблиця Beers


Завдання 7
		Для роботи з базою даних у проєкті з доставки пива було створено CROUD-операції для користувача, це дозволяє створювати редагувати, видаляти та переглядати списки у відповідних таблицях. Крім того було налаштовано коректну роботу FastApi з SQLAlchemy та забезбечели синхронізацію даних між формами та базою даних. На рисунку 12 зобраажено FastAPI
 
Рисунок 12 – FastAPI

Завдання 8
	Специфікація API для проєкту з доставки пива:
	Базова URL: https://127.0.0.1:8000/
1.	User
GET / users – отримати список усіх користувачів
GET / users /  {user_id}- отримати інформацію про конкретного користувача 
POST / users – створити новвого користувача, його тіло запису:
{«name»: «ім’я»:, «phone»: «телефон»:, «email»: «email»:, «password»: «пароль»}
PUT / users /  {user_id} – оновити дані про юзера
DELETE / users  {user_id} – видалити юзера

2.	Пиво
GET / beers – отримати список усіх видів пива
GET / beers /  {beer_id}- отримати інформацію пиво
POST / beers – створити нове пиво, його тіло запису:
{«name»: «назва»:, «type»: «тип»:, «price»:, «0.0»}
PUT / beers /  {beer_id} – оновити дані про пиво
DELETE / beers  {beer_id} – видалити пиво

3.	Замовлення
GET / orders – отримати список усіх замовлень
GET / orders /  {order_id}- отримати інформацію про замовлення
POST / orders – створити нове замовлення, його тіло запису:
{ "user_id": 1, "total": 100.0, "status": "нове", "order_date": "2026-01-13", "delivery_address": "Адреса", "items": [ {"beer_id": 1, "quantity": 2} ] }
PUT / orders /  {order_id} – оновити дані про замовлення
DELETE / orders  {order_id} – видалити замовлення
Формат даних: JSON


Завдання 9
Програмна реалізація розробленого API та функцій роботи з БД. Було створено програмну частину системи доставки пива, яка включає в себе API та функції з базою даних. 
API реалізовано за допомогою фреймворку FastAPI, створено едпоінти для роботи з користувачами, пивом та замовленнями. Для кожного ресурсу реалізовано стандартні операції CRUD, а саме: GET, POST, PUT, DELETE.
Функції роботи з БД реалізовано у модулі crud.py. Вони забезпечують взаємодію з базою даних SQL Server через SQLAlchemy.
Моделі бази даних описсані у modules.py із урахуванням таблиць Users, beers, Orders, OrderLists.
Схеми валідації даних реалізовані у schemas.py за допомогою Pydantic, що дозволяє перевіряти правильність даних які прихлдять в API.
Підключення до бази даних здійснено через db.py для роботи з SQL Server.


Висновки:
У ході виконання лабораторнох роботи мною було отримано навички у роботі з базами даних для серверної частини програмної системи та прикладного програмного інтерфейсу. Було реалізовано REST API для системи доставки пива, а також взаємодію з базою даних SQL Server.







Додаток А
Відеозапис доповіді: https://youtu.be/CoslAVOia94
Хронологічний запис:
0:00 - Вступ 
0:57 - Будова програмної системи 
2:32 - UML дшаграма прецендентів 
4:18 - ER діаграма бази даних 
5:56 - База даних програмної системи 
6:46 - Діаграма структури бази даних 
7:07 - Функції роботи з базою даних 
8:38 - API для взаємодії з серверної частини з клієнтами 
9:50 - перегляд функціоналу API

